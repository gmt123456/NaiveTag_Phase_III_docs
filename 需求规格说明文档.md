# 需求规格说明文档

[TOC]

## 更新记录

| 修改人 | 日期      | 修改内容                 | 版本 |
| ------ | --------- | ------------------------ | ---- |
| 高梦婷 | 2018-5-20 | 创建需求规格说明文档初稿 | 0.1  |

## 引言

### 文档编写目的

本文档描述了迭代三众包标注系统的功能需求和非功能需求。开发小组的软件系统实现与验证工作都以此文档为依据。 除特殊说明之外，本文档所包含的需求都是高优先级需求。本说明书的内容可能在项目实施过程中发生变更，但是必须由项目小组成员发出变更请求，小组讨论，最终决定，建立持续有效的版本控制。

### 参考文献

1. 《软件工程与计算（卷二）》
2. 《软件工程与计算（卷三）》
3. 《软件需求规格说明目标（IEEE标准）》

## 项目概述

本项目旨在建立一个众包标注系统。该系统能够接受众包发起者的标注请求，并将请求分发给众包工人，工人在平台进行建议数据标注，系统评估并将标注结果反馈给众包发起者。同时，系统和众包发起者可以评估工人的完成质量并给予奖励；系统具有一个或者多个智能化模块。

### 项目范围说明

#### 项目目标

- 实现一个众包数据标注平台
- 发布者能够发布、查看、下载任务及任务相关信息
- 众包工人能够查看任务、接受任务、执行任务、完成任务、获得奖励、查看个人信息
- 能够查看工人排名、每日活跃度变化情况、工人能力变化情况，工人积分变化情况等统计信息

### 项目约束

- CON1：采用Java语言开发
- CON2：系统使用的是PC端的图形界面，评优必须采用web应用
- CON3：迭代I II不允许使用数据库
- CON4：项目建议采用分层模型进行开发
- CON5：将工程行为尽可能地记录在Gitlab上
- CON6：每次迭代产品均必须附带部署说明文档

## 详细需求描述

### 对外接口需求

### 功能需求

#### 工人个人信息

##### 特性描述

工人能够查看个人基本信息和统计信息，并修改自己的头像、用户名、密码

##### 刺激/响应序列

刺激：工人登录众包标注平台

响应：系统显示工人个人基本信息和各项统计信息

刺激：工人请求查看全站工人排名

响应：系统显示全站工人排行榜

刺激：工人请求更改个人信息

响应：系统显示个人信息更改页面

刺激：工人请求修改用户名

响应：系统返回修改结果

刺激：工人请求修改头像

响应：系统显示个人头像更改页面

刺激：工人请求修改密码

响应：系统显示个人密码更改页面

##### 相关功能需求

| 编号                       | 需求描述                                                     |
| -------------------------- | ------------------------------------------------------------ |
| WorkerInfo.Show            | 当用户登录众包标注平台时，系统要显示工人基本个人信息（头像、用户名、邮箱、段位、积分、排名、能力值）和工人的各项统计信息（个人的每日活跃度变化情况、能力变化情况、积分变化情况） |
| WorkerInfo.Rank            | 当用户请求查看全站排行榜时时，系统要显示排行榜信息，最大显示名额为20名 |
| WorkerInfo.Modify          | 当用户请求修改个人信息时，系统要显示个人信息修改界面         |
| WorkerInfo.Modify.UserName | 当用户请求修改用户名时，系统要返回修改结果并更新个人信息     |
| WorkerInfo.Modify.Avatar   | 当用户请求修改头像时，系统要显示头像修改界面，并允许用户上传头像和剪裁；当用户修改完成后，系统要返回修改结果并更新个人信息 |
| WorkerInfo.Modify.Password | 当用户请求修改密码时，系统要显示密码修改界面，并允许用户输入旧密码、新密码与确认密码；当用户修改完成后，系统要返回修改结果 |

#### 工人接受任务

##### 特性描述

工人能够查找、获取任务

##### 刺激/响应序列

刺激：工人输入关键字，或同时选择筛选条件、排序方式请求搜索任务

响应：系统显示满足搜索结果的一级任务列表

刺激：工人点击一级任务请求预览

响应：系统显示一级任务界面

刺激：工人请求参与选中的一级任务

响应：系统显示参与任务结果

刺激：工人请求查看所有的子任务

响应：系统显示所有子任务结果

刺激：工人请求接受一个子任务

响应：系统显示接受子任务结果

刺激：工人请求查看自己已接受的子任务

响应：系统显示工人已接受的子任务列表

刺激：工人请求查看在任务中自己获得的积分和金钱

响应：系统显示工人在任务中自己获得的积分和金钱

##### 相关功能需求

| 编号                           | 需求描述                                                     |
| ------------------------------ | ------------------------------------------------------------ |
| WorkerTask.Search              | 当用户输入关键字，或同时选择筛选条件、排序方式请求搜索任务时，系统要显示满足搜索结果的一级任务列表 |
| WorkerTask.FirstLevelTask      | 当用户点击一级任务请求预览时，系统要显示一级任务界面，展示一级任务的标签、类型、封面、标题、描述、状态、总金额、要求段位的详细信息 |
| WorkerTask.FirstLevelTask.Join | 当用户请求参与一级任务时，系统要显示参与结果并更新数据       |
| WorkerTask.SubTaskInfo         | 当用户请求查看一级任务中的所有子任务时，系统要根据标注的分类来分别显示分类下所有的子任务，并显示子任务的封面图、图片数量 |
| WorkerTask.SubTaskInfo.Accept  | 当用户请求接受一级任务下的某个子任务时，系统要显示接受结果并更新数据 |
| WorkerTask.MyParticipation     | 当用户请求查看自己在这个一级任务下所接受的子任务时，系统要按进行中、已完成、已过期的分类来显示所接受的子任务列表 |
| WorkerTask.AboutMe             | 当用户请求查看在任务中自己获得的积分和金钱时，系统要显示在任务中自己获得的积分和金钱 |

#### 工人完成任务

##### 特性描述

工人能够对已获取的子任务进行标注，完成子任务的标注工作后可以提交

##### 刺激/响应序列

刺激：工人请求查看子任务的详细信息

响应：系统显示该子任务的详细信息界面

刺激：工人请求开始标注

响应：系统显示标注界面

刺激：工人请求结束标注

响应：系统返回子任务详细信息界面

刺激：工人请求提交已完成的子任务

响应：系统显示提交结果

##### 相关功能需求

| 编号                              | 需求描述                                                     |
| --------------------------------- | ------------------------------------------------------------ |
| WorkerTask.SubTaskDetails         | 当用户点击查看一个子任务时，系统要显示该子任务的详细信息界面，其中展示要标注的图片列表 |
| WorkerTask.SubTaskDetails.Accept  | 当用户在未接受的子任务详细界面请求接受任务时，系统要返回接受结果并更新数据 |
| WorkerTask.SubTaskDetails.Tag     | 当用户在已接受的子任务详细界面请求开始标注时，系统要进入标注界面 |
| WorkerTask.SubTaskDetails.Tag.End | 当用户在标注界面请求结束标注时，系统要退出标注界面并返回子任务的详细界面 |
| WorkerTask.SubTaskDetails.Submit  | 当用户在已完成的子任务详细界面请求提交任务时，系统要返回提交结果并更新数据 |

#### 发布者个人信息

##### 特性描述

任务发布者可以查看、修改个人信息

##### 刺激/响应序列

刺激：任务发布者请求查看个人信息

响应：系统显示发布者个人信息

刺激：任务发布者请求修改个人信息

响应：系统显示修改个人信息表单

刺激：任务发布者请求提交修改后的个人信息

响应：系统返回修改结果

##### 相关功能需求

| 编号                                  | 需求描述                                                     |
| ------------------------------------- | ------------------------------------------------------------ |
| RequesterInfo.Show                    | 当用户请求查看个人信息时，系统要显示发布者个人信息（包括：用户名、邮箱、头像、账户金额） |
| RequesterInfo.Show.Account            | 当用户请求查看个人账户变动时，系统要显示发布者个人账户变动信息（每次变动金额、缘由） |
| RequesterInfo.Modify                  | 当用户请求对个人信息进行修改时，系统要允许用户修改个人信息并显示修改个人信息表单 |
| RequesterInfo.Modify.Password         | 当用户请求修改个人密码时，系统要允许用户输入原密码、新密码、确认密码 |
| RequesterInfo.Modify.Password.Valid   | 当用户输入正确的原密码、且新密码经确认并请求保存时，系统保存用户输入的新密码，并返回保存结果 |
| RequesterInfo.Modify.Password.Invalid | 当用户没有输入正确的原密码、或新密码没有经确认并请求保存时，系统要返回失败结果并允许用户重新输入 |
| RequesterInfo.Modify.UserName         | 当用户请求修改用户名时，系统要允许用户修改用户名并返回保存结果 |

#### 已发布任务管理

##### 特性描述

任务发布者可以查看已发布任务的信息

##### 刺激/响应序列

刺激：任务发布者请求查看已发布任务列表

响应：系统显示已发布任务列表

刺激：任务发布者请求查看某个任务的详细信息

响应：系统显示该任务的详细信息

刺激：任务发布者请求获取已完成任务的结果文件（即标记结果）

响应：系统将结果文件发送给发布者

##### 相关功能需求

| 编号                            | 需求描述                                                     |
| ------------------------------- | ------------------------------------------------------------ |
| RequesterTask.TaskList          | 当用户请求查看已发布任务时，系统要将所有的已发布任务组织在列表中展示给用户，列表中的每一项的信息包括任务基本信息：封面图、标题、描述、标签、最低工人段位、总金额、参与人数、图片数量、提交时间 |
| RequesterTask.TaskDetail        | 当用户请求查看某一个发布的任务的详细信息时，系统要显示该任务的详细信息界面，其中要显示全部任务基本信息、和工人贡献排名、任务进度 |
| RequesterTask.TaskDetail.Edit   | 当用户请求更改某一个已发布任务的模式或描述时，系统允许用户进行修改并显示更改结果 |
| RequesterTask.TaskList.Download | 当用户请求获取已经完成的任务的标记结果时，系统要允许用户下载标记结果 |

#### 发起新任务

##### 特性描述

任务发布者可以创建新的任务到平台上让众包工人完成

##### 刺激/响应序列

刺激：发布者请求创建新任务

响应：系统显示新建任务需要填写的表单

刺激：发布者填写任务的详细信息

响应：系统显示已填写任务的详细信息

刺激：发布者请求编辑子任务的详细信息

响应：系统显示子任务信息填写表单

刺激：发布者请求对即将发布的任务进行付款

响应：系统计算总金额并显示付款界面

刺激：发布者对总金额进行付款

响应：系统显示付款结果并发布任务

##### 相关功能需求

| 编号                   | 需求描述                                                     |
| ---------------------- | ------------------------------------------------------------ |
| NewTask.Input          | 当用户请求创建新任务时，系统应该允许用户输入任务的信息（标题、描述、标签、截止日期、要求worker段位、任务模式（普通、加急、质量优先）、封面图） |
| NewTask.DataSet        | 当用户请求上传数据集时，系统应该允许用户上传数据集           |
| NewTask.Input.SubTasks | 当用户请求编辑任务的子任务信息时，系统应该允许用户对子任务的详细信息编辑（类型、描述、（如果属于标签标注的还需要允许输入各个标签）） |
| NewTask.Check          | 当用户请求提交新发布任务信息时，系统要对任务信息的完整性进行检查，如果有必须填写的内容为空，则提示要求继续填写任务信息 |
| NewTask.Pay            | 当用户填写完成任务信息并请求付款时，系统应该显示本次发布任务所需的总金额，并允许用户进行付款 |
| NewTask.Pay.Finish     | 当用户完成对任务的付款时，系统应该发布任务并显示结果         |

#### 查看网站信息

##### 特性描述

系统管理员可以请求查看网站的用户的详细信息。

##### 刺激/响应序列

刺激：系统管理员请求查看用户活跃情况。

响应：系统显示用户活跃情况。

刺激：系统管理员请求查看用户比例。

响应：系统显示用户数量和比例。

##### 相关功能需求

| 编号                       | 需求描述                                     |
| ------------------------ | ---------------------------------------- |
| WebSiteInfo.UserActivity | 当系统管理员请求查看网站活跃情况时，系统要显示系统的活跃人数等有关信息。     |
| WebSiteInfo.UserInfo     | 当系统管理员请求查看网站用户情况时，系统要显示系统的注册用户数量、变化情况等有关信息。 |

#### 标记参与的子任务

##### 特性描述

用户对已经接受的子任务执行标注，对数据进行标注时，可以对数据进行整体、局部、区域的标注

##### 刺激/响应序列

刺激：用户请求标注任务

响应：系统加载并显示待标注的数据

刺激：用户对数据进行方框标记

响应：系统显示标记的方框

刺激：用户在方框标记中对内容进行描述

响应：系统要在数据周围显示用户输入的描述

刺激：用户输入对整体数据的描述

响应：系统在数据周围显示用户输入的描述

刺激：用户请求提交此次标注结果

响应：系统显示此次数据标注的结果

刺激：用户请求标注下一份数据

响应：如果数据集中还留有数据则显示下一份数据，没有则提示用户此数据集已标注完成

刺激：用户对数据进行区域描边

响应：系统对被描边区域进行变色显示

刺激：用户对描边区域进行描述

响应：系统在描边区域周围显示用户的描述

刺激：用户请求取消当前标注任务

响应：系统关闭当前任务

刺激：用户请求删除当前标注

响应：系统数据当前的标注内容进行清空

##### 相关功能需求

| 编号                      | 需求描述                                                     |
| ------------------------- | ------------------------------------------------------------ |
| Tag.Input                 | 系统应该允许用户在进行数据标注的过程中使用鼠标、键盘进行输入 |
| Tag.Input.Draw            | 系统应该允许用户在图上进行标记                               |
| Tag.Input.Delete          | 用户请求删除当前的标注信息时，系统要删除用户选择的标注信息（包括标记、描述） |
| Tag.Input.Draw.Square     | 用户在为数据进行方框标注时，系统要为用户提供方框标注工具     |
| Tag.Input.Draw.Stroke     | 用户在为数据进行区域标注时，系统要为用户提供描边工具         |
| Tag.Input.Describe.Total  | 系统应该允许用户对整个数据进行描述                           |
| Tag.Input.Describe.Stroke | 系统要允许用户对所描区域中的内容进行描述                     |
| Tag.Input.Describe.Square | 系统要允许用户对所标方框中的内容进行描述                     |
| Tag.Data.Load             | 当用户请求数据标注任务时，系统要能够加载待标注的数据并展示   |
| Tag.Data.Next             | 当用户点击下一份数据时，如果数据集中还有剩余的数据，则系统将显示下一份数据，否则系统将提示用户没有剩余的待标注数据 |
| Tag.Commit                | 当用户标注完一份数据时，系统存储用户标记的信息（参见Tag.Update.Data）以及更新日志中用户此次的标注行为（参见Tag.Update.Log），然后显示用户此次的标注结果 |
| Tag.Commit.Done           | 当用户标记完数据集中所有的数据时，系统提示用户数据已经标注完成 |
| Tag.Commit.Incomplete     | 当用户标注未完成（进行了区域标记但是所描边没有围成一个区域；整体、方框或区域缺少对应的描述）就点击提交时，系统将提示用户标注未完成 |
| Tag.Update.Log            | 系统记录并更新用户此次标注行为的信息（消耗时间、数据来源、数据类型） |
| Tag.Update.Data           | 系统记录并存储对此数据的标注信息                             |
| Tag.Show.Square           | 当用户完成对数据的方框标记后，系统在数据中对应的地方显示该方框 |
| Tag.Show.Stroke           | 当用户完成对数据的区域标记后，系统在数据中该区域对应的地方进行变色显示 |
| Tag.Close                 | 用户请求取消当前标注任务，系统要退出当前标注任务             |

#### 查看已完成标注

##### 特性描述

用户在已接受但还未提交的子任务中，可以查看自己已经标注过的图片列表及其标注数据，并对其标注数据进行修改

##### 刺激/响应序列

刺激：用户请求查看已标注过的图片列表

响应：系统展示用户已经标注过的图片列表

刺激：用户选择具体的图片进行查看其标注信息

响应：系统单独展示该图片的数据（用户标注后的版本）

刺激：用户请求对数据进行修改

响应：系统允许用户对数据进行修改

刺激：用户请求保存修改

响应：系统显示保存结果

##### 相关功能需求

| 编号               | 需求描述                                                     |
| ------------------ | ------------------------------------------------------------ |
| Finish.Show        | 当用户请求查看已经标注过的图片列表时，系统要显示已经标注过的图片列表 |
| Finish.Data.Load   | 当用户请求查看一个已经标注过的图片的标注信息时，系统要显示标注界面并能够加载原有的标注数据 |
| Finish.Data.Modify | 当用户请求修改一个已经标注过的图片时，系统要允许用户修改标注 |
| Finish.Update.Data | 当用户修改完成请求提交时，系统要更新标注的信息               |
| Finish.Update.Log  | 当用户修改完成且保存成功时，系统要记录用户此次的操作信息（包括时间，操作人账号，操作的数据目标） |

### 数据需求

#### 数据定义

**DR1**：数据集中的每份数据的分辨率应该应该一致

**DR2**：系统要记录用户的数据标注信息知道任务发布者回收任务（任务截止）